<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AURA — Versione Stabile (PWA Ready)</title>
  <link rel="manifest" href="./manifest.json">
  <style>
    :root{--bg:#02060a;--accent:#52e3c2;--text:#e8faff;--glow:#7af0e5}
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;overflow:hidden;background:radial-gradient(circle at 50% 40%,#03141d 0%,#01070d 80%);color:var(--text);font-family:"JetBrains Mono", monospace;display:flex;align-items:center;justify-content:center;}

    #start-screen{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:10;background:radial-gradient(circle at 50% 50%,#020c14,#000610 80%);}
    #start-btn{font-family:"Poppins",sans-serif;font-size:22px;font-weight:600;padding:18px 48px;border:none;border-radius:14px;cursor:pointer;color:#fff;background:linear-gradient(90deg,#52e3c2,#6ad1ff);box-shadow:0 0 20px rgba(82,227,194,0.5);transition:transform 0.3s ease, box-shadow 0.3s ease;}
    #start-btn:hover{transform:scale(1.05);box-shadow:0 0 30px rgba(82,227,194,0.8);}

    canvas#fireworks-bg{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none;}

    .card{position:relative;z-index:2;width:880px;max-width:95%;border-radius:18px;padding:36px;backdrop-filter:blur(10px);background:rgba(255,255,255,0.04);box-shadow:0 0 60px rgba(0,255,255,0.15);display:flex;flex-direction:column;align-items:center;gap:24px;display:none;}

    .logo{display:flex;align-items:center;gap:12px;}
    .logo .mark{width:60px;height:60px;border-radius:14px;display:grid;place-items:center;background:conic-gradient(from 200deg,#5af2d0,#6ad1ff 40%,#b58bff);font-weight:700;color:#012;box-shadow:0 0 25px rgba(82,227,194,0.25);}
    .logo .title{font-size:22px;letter-spacing:1px;text-shadow:0 0 8px var(--glow)}

    .terminal{width:100%;max-width:820px;height:420px;border-radius:14px;padding:18px;background:linear-gradient(180deg,#031017 0%,#051821 100%);border:1px solid rgba(82,227,194,0.2);box-shadow:inset 0 0 25px rgba(0,0,0,0.8);display:flex;flex-direction:column;overflow:hidden;}
    .term-header{display:flex;align-items:center;gap:10px;padding:6px 8px}
    .dot{width:10px;height:10px;border-radius:50%}
    .d1{background:#ff5f57}.d2{background:#febc2e}.d3{background:#2ecc71}
    .term-body{flex:1;padding:8px 12px;overflow:auto;font-size:14px;line-height:1.35;color:var(--text);}
    .line{white-space:pre-wrap;animation:fadein 0.3s ease-in;}
    @keyframes fadein{from{opacity:0;}to{opacity:1;}}

    .final{margin-top:10px;padding:14px;border-radius:10px;background:linear-gradient(90deg,rgba(82,227,194,0.08),rgba(106,209,255,0.04));border:1px solid rgba(82,227,194,0.1);font-weight:600;text-align:center;text-shadow:0 0 10px var(--glow);}

    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:100;}
    .modal.active{display:flex;animation:fadein 1s ease-in-out;}
    .modal-content{position:relative;width:90%;max-width:750px;padding:40px 50px;border-radius:18px;background:radial-gradient(circle at 50% 30%,#051622,#0c1c29);border:1px solid rgba(82,227,194,0.25);box-shadow:0 0 40px rgba(82,227,194,0.3);overflow:hidden;text-align:center;z-index:2;animation:popupIn 1s ease forwards;}
    @keyframes popupIn{from{opacity:0;transform:scale(0.8);}to{opacity:1;transform:scale(1);}}
    h2{font-size:26px;margin-bottom:18px;color:var(--accent);text-shadow:0 0 12px var(--glow)}
    #poem{font-family:"Poppins",sans-serif;font-size:18px;line-height:1.6;white-space:pre-wrap;color:#e8faff;font-weight:400;text-shadow:0 0 8px rgba(255,255,255,0.25)}
  </style>
</head>
<body>
  <div id="start-screen">
    <button id="start-btn">Avvia Ryzn</button>
  </div>

  <canvas id="fireworks-bg"></canvas>

  <div class="card" id="main-card">
    <div class="logo">
      <div class="mark">A</div>
      <div class="title">AURA — Dev.Ryzn Server Access</div>
    </div>

    <div class="terminal" id="terminal">
      <div class="term-header">
        <div class="dot d1"></div><div class="dot d2"></div><div class="dot d3"></div>
        <span style="opacity:.6"> ./run-decrypt.joit</span>
      </div>
      <div class="term-body" id="term-body"></div>
    </div>
    <div id="final" class="final" style="display:none"></div>
  </div>

  <div class="modal" id="popup">
    <div class="modal-content">
      <h2>✨ Fine della Beta — Benvenuta Aura Stabile ✨</h2>
      <div id="poem"></div>
    </div>
  </div>

  <audio id="bg-music" src="https://cdn.ai-music-generator.ai/NmM0YjJmZTUtNDk1ZC00YWM2LWEwMGQtMmJiNDZiZGI2MjM5.mp3" loop preload="auto"></audio>

  <script>
  document.addEventListener('DOMContentLoaded',()=>{
    const startScreen=document.getElementById('start-screen');
    const startBtn=document.getElementById('start-btn');
    const card=document.getElementById('main-card');
    const music=document.getElementById('bg-music');
    const body=document.getElementById('term-body');
    const bg=document.getElementById('fireworks-bg');
    const popup=document.getElementById('popup');
    const poemEl=document.getElementById('poem');

    function typeLine(text,cb,speed=30){
      const el=document.createElement('div');el.className='line';body.appendChild(el);
      let i=0;const interval=setInterval(()=>{el.textContent=text.slice(0,i);i++;if(i>text.length){clearInterval(interval);if(cb)cb();}body.scrollTop=body.scrollHeight;},speed);
    }

    function simulate(){
      const lines=["Allocating crypto engine...","Loading interpreter for .joit...","Feeding payload to sandbox...","Performing integrity checks...","Attempting decryption passes..."];
      let i=0;
      function next(){if(i<lines.length){typeLine(lines[i],()=>{i++;next();});}else showFinal();}
      next();
    }

    function showFinal(){
      typeLine('[system] --- DECRYPTION COMPLETE ---',()=>{
        const finalBox=document.getElementById('final');
        finalBox.style.display='block';
        finalBox.innerHTML='<strong>AURA NON È PIÙ IN FASE BETA!</strong><br>Attendi le <span style="color:var(--accent)">03:00</span> per accedere alla piattaforma definitiva.<br><em>Da questo momento le demo sono scollegate dal server beta.</em><br><br><strong>Ci vediamo alle 3:01 per il download definitivo.</strong>';
        setTimeout(showPopup,2000);
      });
    }

    function showPopup(){
      popup.classList.add('active');
      const poem="Ecco la fine di un atto, un primo battito,\nla Beta si dissolve come nebbia al mattino.\nNasce la Versione Stabile, chiara e viva,\nun porto sicuro di luce e algoritmo.\n\nAura respira, libera e definitiva.\nAlle 03:00, il mondo si apre al nuovo inizio.";
      let i=0;poemEl.textContent='';
      const typer=setInterval(()=>{poemEl.textContent=poem.slice(0,i);i++;if(i>poem.length)clearInterval(typer);},25);
    }

    function startFireworks(canvas){
      const ctx=canvas.getContext('2d');
      function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}resize();window.addEventListener('resize',resize);
      const particles=[];
      function spawn(x,y,color){for(let i=0;i<80;i++){particles.push({x,y,vx:(Math.random()-0.5)*10,vy:(Math.random()-0.5)*10,life:120,color});}}
      setInterval(()=>{spawn(Math.random()*canvas.width,Math.random()*canvas.height*0.8,`hsl(${Math.random()*360},90%,65%)`);},450);
      function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.vy+=0.05;p.life--;ctx.beginPath();ctx.globalAlpha=Math.max(p.life/120,0);ctx.fillStyle=p.color;ctx.arc(p.x,p.y,4,0,Math.PI*2);ctx.fill();});for(let i=particles.length-1;i>=0;i--)if(particles[i].life<=0)particles.splice(i,1);requestAnimationFrame(draw);}draw();
    }

    startBtn.addEventListener('click',async()=>{
      startScreen.style.display='none';
      card.style.display='flex';
      music.volume=0.4;
      await music.play().catch(()=>{});
      startFireworks(bg);
      typeLine('Inizializzazione motore .joit — caricamento...',simulate);
    });

    if('mediaSession' in navigator){
      const svgCover = encodeURIComponent(`<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'><rect width='512' height='512' fill='url(#grad)'/><defs><linearGradient id='grad' x1='0' x2='1' y1='0' y2='1'><stop offset='0%' stop-color='#0ff'/><stop offset='100%' stop-color='#006'/></linearGradient></defs><text x='50%' y='50%' font-size='48' text-anchor='middle' fill='white' font-family='Poppins'>Aura</text></svg>`);
      const coverUrl = `data:image/svg+xml;charset=utf-8,${svgCover}`;
      navigator.mediaSession.metadata = new MediaMetadata({
        title: 'Aura',
        artist: 'Linda García (Prod. Icy030)',
        album: 'Prod. Icy.030',
        artwork: [
          { src: coverUrl, sizes: '512x512', type: 'image/svg+xml' }
        ]
      });
      navigator.mediaSession.setActionHandler('play',()=>music.play());
      navigator.mediaSession.setActionHandler('pause',()=>music.pause());
    }
  });
  </script>
</body>
</html>
